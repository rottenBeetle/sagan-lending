# Настройка Яндекс Метрики для SAGAN Lending

## 1. Создание счетчика в Яндекс Метрике

### Шаг 1: Регистрация
1. Перейдите на [metrika.yandex.ru](https://metrika.yandex.ru)
2. Войдите через аккаунт Яндекса
3. Если у вас нет аккаунта, создайте его

### Шаг 2: Создание счетчика
1. Нажмите кнопку **"Добавить счетчик"**
2. Заполните форму:
   - **Название счетчика**: SAGAN Lending
   - **Домен**: ваш домен (например, `yourdomain.com`)
   - **Часовой пояс**: выберите ваш часовой пояс
   - **Валюта**: RUB (рубли)
3. Нажмите **"Создать счетчик"**

### Шаг 3: Получение ID счетчика
После создания вы получите ID счетчика (например, `12345678`). Замените этот ID в коде на ваш реальный.

## 2. Настройка целей (целевых действий)

### Основные цели для отслеживания:

#### 1. Просмотр главной страницы
- **Название**: Главная страница
- **Тип**: Просмотр страницы
- **Условие**: URL содержит `index.html`

#### 2. Переход на квиз
- **Название**: Переход на квиз
- **Тип**: Переход по ссылке
- **Условие**: URL содержит `quiz.html`

#### 3. Начало прохождения квиза
- **Название**: Начало квиза
- **Тип**: JavaScript событие
- **Условие**: Событие `quiz_start`

#### 4. Завершение квиза
- **Название**: Завершение квиза
- **Тип**: JavaScript событие
- **Условие**: Событие `quiz_complete`

#### 5. Отправка формы контактов
- **Название**: Отправка формы
- **Тип**: JavaScript событие
- **Условие**: Событие `form_submit`

#### 6. Клик по кнопке CTA
- **Название**: Клик по кнопке
- **Тип**: JavaScript событие
- **Условие**: Событие `button_click`

## 3. Настройка целей в интерфейсе

### Как добавить цель:
1. В панели счетчика перейдите в **"Цели"**
2. Нажмите **"Добавить цель"**
3. Выберите тип цели
4. Настройте условия
5. Сохраните цель

## 4. Проверка работы

### Проверка загрузки счетчика:
1. Откройте сайт в браузере
2. Откройте инструменты разработчика (F12)
3. Перейдите на вкладку **"Network"**
4. Обновите страницу
5. Найдите запросы к `mc.yandex.ru`

### Проверка событий:
1. В консоли браузера должны появляться сообщения:
   ```
   Analytics event: page_view {title: "SAGAN - Верни близость с дочерью"}
   ```

## 5. Дополнительные настройки

### Включенные функции:
- ✅ **Clickmap** - карта кликов
- ✅ **TrackLinks** - отслеживание переходов
- ✅ **AccurateTrackBounce** - точный подсчет отказов
- ✅ **Webvisor** - вебвизор (запись действий пользователей)
- ✅ **Defer** - отложенная загрузка

### Настройка вебвизора:
1. В настройках счетчика включите **"Вебвизор"**
2. Настройте фильтры (например, исключить администраторов)
3. Установите лимит записей

## 6. Отслеживание событий в коде

### Автоматическое отслеживание:
- Просмотры страниц
- Клики по кнопкам с классом `cta-button`

### Ручное отслеживание:
```javascript
// Отслеживание события
Analytics.trackEvent('custom_event', {param: 'value'});

// Отслеживание клика по кнопке
Analytics.trackButtonClick('Название кнопки', 'Местоположение');

// Отслеживание отправки формы
Analytics.trackFormSubmit('Название формы', formData);

// Отслеживание прогресса квиза
Analytics.trackQuizProgress(1, 'Ответ пользователя');

// Отслеживание завершения квиза
Analytics.trackQuizComplete(resultData);
```

## 7. Анализ данных

### Основные отчеты:
1. **Обзор** - общая статистика
2. **Источники** - откуда приходят посетители
3. **Поведение** - как пользователи взаимодействуют с сайтом
4. **Цели** - конверсии по целям
5. **Вебвизор** - записи действий пользователей

### Ключевые метрики для отслеживания:
- Количество посетителей
- Время на сайте
- Глубина просмотра
- Конверсия в цели
- Источники трафика

## 8. Безопасность

### Рекомендации:
1. Не передавайте персональные данные в события
2. Используйте обезличенные данные
3. Настройте фильтры для исключения внутренних IP
4. Регулярно проверяйте настройки приватности

## 9. Устранение неполадок

### Счетчик не загружается:
1. Проверьте правильность ID счетчика
2. Убедитесь, что код размещен в `<head>`
3. Проверьте блокировщики рекламы

### События не отслеживаются:
1. Проверьте консоль браузера на ошибки
2. Убедитесь, что файл `analytics.js` подключен
3. Проверьте правильность названий событий

### Данные не обновляются:
1. Подождите 2-3 часа (задержка обновления)
2. Проверьте настройки часового пояса
3. Убедитесь, что счетчик активен
